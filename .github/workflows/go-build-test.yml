name: Build / Test

on: [push, pull_request]

jobs:
  test:
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        go: ['1.24.x', '1.25.x']
    
    name: Test with Go ${{ matrix.go }} on ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    steps:
        - name: Checkout
          uses: actions/checkout@v5
        - name: Setup Go
          uses: actions/setup-go@v6
          with:
            go-version: ${{ matrix.go }}
        
        - name: go build
          run: |
            go build -v ./...
            env GOOS=js GOARCH=wasm go build -v ./...
        
        - name: go test
          run : |
            go test -v ./...